<!DOCTYPE html>
<html lang="en">
<head>
    <title>Java in the Browser with WebAssembly</title>
</head>
<body>

<p>Guess the answer :</p>
<button type="button" onclick="playTheGame(5)">5</button>
<button type="button" onclick="playTheGame(6)">6</button>
<button type="button" onclick="playTheGame(7)">7</button>

<script>
    let magicNumber = 0;

    function playTheGame(number) {
        if (number === magicNumber) {
            alert("You guessed right! It is " + magicNumber);
        } else {
            alert("Wrong! Guess again!");
        }
    }

    function setMagicNumber(number) {
        console.log("Java code has called the JS setMagicNumber method.")
        magicNumber = number
        console.log("WASM set the magic number to: " + magicNumber)
    }

    WebAssembly.instantiateStreaming(
        fetch('wasm/guessNumber.wasm'), {
            env: {
                setMagicNumber
            }
        }).then(module => {
                console.log("Calling the Java method from JavaScript.")
                module.instance.exports.getMagicNumber(10)
            }
        );
</script>

</body>
</html>